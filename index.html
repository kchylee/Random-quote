<!DOCTYPE HTML>
<html>
<meta charset="utf-8">
<head>
    <title>Random Quote Generator</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="./public/styles.css">
    <link href="https://fonts.googleapis.com/css?family=Bungee" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script>
        $(document).ready(() => {
            $("#getQuote").click(() => {
                $("#row").css("display", "block");
                let firstName;
                let req = new XMLHttpRequest(),
                    method = "GET",
                    url = "https://andruxnet-random-famous-quotes.p.mashape.com/?cat=famous&count=1";
                req.open(method, url, true);
                req.setRequestHeader("X-Mashape-Key", "rvDRHtqfpxmsh3Vrk3SdZRPd6aUop1lXt5fjsnNrDvbdJnVPhU");
                req.onreadystatechange = () => {
                    if (req.readyState === XMLHttpRequest.DONE && req.status === 200){
                        let resObj = JSON.parse(req.responseText);
                        $("#quote").html(resObj.quote);
                        $("#person").html(resObj.author);
                        firstName = resObj.author.replace(/(\w+)(\s.+)+/, '$1');
                        console.log(firstName);                        
                        window.setTimeout(()=>{
                            $("#getPerson").css("display", "block").html(firstName + " who???");
                        }, 2000);
                    }else{
                        $("#quote").html(req.status);
                    }
                };
                req.send()
                
                
            })
        })
    </script>
</head>
<body>
    <header>
        <h1>Someone once said...</h1>
    </header>
    <section>
        <button id="getQuote">Said what???</button>
        <div class="container">
            <div class="row" id="row">
                <div id="space" class="col-sm-6 col-md-6 col-lg-6"></div>    
                <div id="quote-with-person" class="col-sm-6 col-md-6 col-lg-6">
                    <p id="quote"></p>
                    <p id="person"></p>
                </div>
            </div>
        </div>
        
        <button id="getPerson"></button>
    <section>
</body>
</html>